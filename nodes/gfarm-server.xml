<?xml version="1.0" standalone="no"?>

<kickstart>


	<description>
	Grid Data Farm Frontend support
	Assumes the Frontend is the metadata server
	</description>

	<copyright>
	Copyright (c) 2000 - 2007 The Regents of the University of California.
	All rights reserved. Rocks(tm) v4.3 www.rocksclusters.org
	</copyright>

	<changelog>
	$Log$
	Revision 1.15  2010/03/03 18:09:27  mjk
	- attributes control fsnodes
	- nuke gfarm-base (won't work until we do attrs on frontend)
	- time to test
	
	Revision 1.14  2010/03/03 17:58:21  mjk
	almost there ...
	
	Revision 1.13  2007/07/31 17:09:04  nadya
	accommodate new gfarm srpms
	
	Revision 1.12  2007/06/23 04:03:36  mjk
	mars hill copyright
	
	Revision 1.11  2006/09/11 22:48:38  mjk
	monkey face copyright
	
	Revision 1.10  2006/08/10 00:10:44  mjk
	4.2 copyright
	
	Revision 1.9  2005/10/12 18:09:29  mjk
	final copyright for 4.1
	
	Revision 1.8  2005/04/15 00:40:38  mjk
	- Changed name of gfarm nodes to gfarm-x-y
	- Gfarm Roll works for inside the cluster
	
	Revision 1.7  2005/04/14 22:56:32  mjk
	*** empty log message ***
	
	Revision 1.6  2005/04/14 18:24:01  mjk
	name like gfs-0-0
	
	Revision 1.5  2005/04/14 18:11:28  mjk
	*** empty log message ***
	
	Revision 1.4  2005/04/14 16:42:17  mjk
	*** empty log message ***
	
	Revision 1.3  2005/04/14 13:34:55  mjk
	AIST gets the copyright on this
	
	Revision 1.2  2005/04/14 13:18:53  mjk
	gfarm is an appliance type
	
	</changelog>

	<package>gfarm-server</package>
	<package>gfarm-doc</package>
	<package>gfarm-devel</package>
        <package>gfarm2fs</package>
        <package>gfarm-client</package>
        <package>gfarm-libs</package>

        <package>fuse</package>
        <package>fuse-devel</package>

	<package>postgresql</package>
	<package>postgresql-libs</package>
	<package>postgresql-server</package>
	<package>postgresql-devel</package>
	<package>postgresql-contrib</package>

<post>

<!--
        The GFarm RPMs automatically adds the _gfarm user as a normal account
        with UID >= 500.  We also need the gfarm admin accout created.
        Here we make sure both UIDs are below 500.
-->
/usr/sbin/usermod -u 423 _gfarm
/usr/sbin/useradd -c "GFarm Admin" -u 424 gfarm


/opt/rocks/bin/rocks add appliance attr compute gfarm_fsnode true
/opt/rocks/bin/rocks add appliance attr compute gfarm_data \
	/state/partition1/gfarm

<file name="/etc/rc.d/rocksconfig.d/post-50-gfarm" perms="744">
#!/bin/sh

config-gfarm -A gfarm

<!-- not sure if this is needed -->

/sbin/chkconfig gfarm-pgsql on
/sbin/chkconfig gfmd on
/sbin/service gfarm-pgsql stop 
/sbin/service gfarm-pgsql start
/sbin/service gfmd stop
/sbin/service gfmd start

rm /etc/rc.d/rocksconfig.d/post-50-gfarm
</file>

</post>

</kickstart>
